{% extends 'base.html' %}

{% block title %}Manage · Blog Speaks{% endblock %}

{% block hero %}
<section class="hero-section manage-hero" style="--hero-image: url('{{ url_for('static', filename='delete.jpg') }}');">
  <div class="container position-relative">
    <div class="hero-copy" data-animate="fade-up">
      <p class="eyebrow mb-3">Moderation workspace</p>
      <h1 class="display-heading">Keep the library relevant by removing outdated or duplicate posts.</h1>
      <p class="lead text-light opacity-85 mb-4 col-lg-7 px-0">Select the story you’d like to retire. Changes take effect immediately across the platform.</p>
    </div>
  </div>
</section>
{% endblock %}

{% block content %}
<div class="container">
  <div class="section-header" data-animate="fade-up">
    <span class="eyebrow">All posts</span>
    <h2 class="section-title">Choose a story to archive</h2>
    <p class="section-subtitle">Review the details before confirming deletion—this action cannot be undone.</p>
  </div>

  <div class="row g-4">
    {% for post in posts %}
    <div class="col-12" data-animate="fade-up" data-animate-delay="{{ loop.index0 * 40 }}">
      <article class="post-manage-card">
        <div>
          <p class="post-date">{{ post.date_posted.strftime('%b %d, %Y') }}</p>
          <h3 class="post-title mb-2">
            <a href="{{ url_for('post', post_id=post.id) }}">{{ post.title }}</a>
          </h3>
          <p class="post-subtitle mb-0">{{ post.subtitle }}</p>
        </div>
        <div class="manage-actions">
          <span class="post-author mb-2">By {{ post.author or 'Blog Speaks' }}</span>
          <form
            name="deleteForm"
            id="deleteForm-{{ post.id }}"
            method="POST"
            action="{{ url_for('deletepost') }}"
            onsubmit="return confirm('Delete this post permanently?');"
          >
            <input type="hidden" name="post_id" value="{{ post.id }}">
            <button type="submit" class="btn btn-danger btn-ghost">Delete post</button>
          </form>
        </div>
      </article>
    </div>
    {% else %}
    <div class="col-12" data-animate="fade-up">
      <div class="empty-state">
        <h3 class="mb-2">No posts to manage.</h3>
        <p class="mb-4 text-muted">When you publish new content, it will appear here for quick removal.</p>
        <a class="btn btn-primary" href="{{ url_for('add') }}">Create a new story</a>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
